<h1>{{title}}</h1>

<section class="events-section">
  {{!-- Search bar with filter dropdown --}}
  <form action="/events/search" method="GET" class="search-form">
    <input
      type="text"
      name="search"
      placeholder="Search events..."
      aria-label="Search events"
    />

    {{!-- Filter dropdown --}}
    <select name="filter" aria-label="Filter by">
      <option value="title">By Title</option>
      <option value="author">By Author</option>
    </select>
    <button type="submit">Search</button>
    <div class="alert">{{error}}</div>
  </form>

  <a class="newEventLink" id="newEventLink" href="/events/create"
    >Create New Event</a
  >

  {{!-- The attributes of the event like title, date_time, .... will be replaced
  auto --}} {{!-- We do need to register a helper function
  "getOrganizer(ObjectId var) return string " --}} {{#each events}}
  <article class="event-list-item">
    <h2>{{title}}</h2>
    <p class="date-time">{{this.date_time}}</p>
    <div class="location">
      <p>
        {{this.location.address}}, {{this.location.state}},
        {{this.location.zip}}
      </p>
    </div>
    <p class="description">{{this.description}}</p>
    <p class="details">
      Organized by: {{this.organizer_info.firstName}}
      {{this.organizer_info.lastName}}<br />
      Attending Fee: ${{this.attending_fee}} <br />
      Capacity: {{this.capacity}} people <br />
      Age Limit: {{this.age_limit}}+ years
    </p>
    <p class="attendees-count">{{this.attendees.length}} people attending</p>
    <div class="comments-section">
      <p>{{this.comments.length}} comments</p>
      {{#if comments}}
      <ul class="comments-list">
        {{#each comments}}
        <li>{{this.content}}</li>
        {{/each}}
      </ul>
      {{/if}}
    </div>
    {{#ifCond capacity "gt" 0}}
    <form action="/event/{{this._id}}" method="POST">
      <button type="submit">RSVP Here</button>
    </form>
    {{else}}
    <p>Capacity Reached</p>
    {{/ifCond}}
  </article>
  {{/each}}
</section>
